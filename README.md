# lti-server

> LTI Provider for launching an Ilios dashboard

To build and deploy run the following in your shell:

```bash
sam build
sam deploy --guided
```

The SAM CLI can also emulate your application's API. Use the `sam local start-api` to run the API locally on port 3000.

```bash
lti-server$ sam local start-api
lti-server$ curl http://localhost:3000/
```

## Resources

See the [AWS SAM developer guide](https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/what-is-sam.html) for an introduction to SAM specification, the SAM CLI, and serverless application concepts.

## Fetch, tail, and filter Lambda function logs

To simplify troubleshooting, SAM CLI has a command called `sam logs`. `sam logs` lets you fetch logs generated by your deployed Lambda function from the command line. In addition to printing the logs on the terminal, this command has several nifty features to help you quickly find the bug.

`NOTE`: This command works for all AWS Lambda functions; not just the ones you deploy using SAM.

```bash
lti-server$ sam logs -n DashboardFunction --stack-name lti-server --tail
```

## Unit tests

Tests are defined in the `tests` folder in this project.

```bash
$ npm install
$ npm run test
```

## CLI

```
$ npm run cli -- --help

Usage: generate-url [options] <ltiAppUrl> <apiServer> <apiNameSpace> <iliosSecret> <userId>

Generate an LTI login URL with a JWT token

Arguments:
  ltiAppUrl     LTI application URL
  apiServer     API server URL
  apiNameSpace  API namespace
  iliosSecret   Ilios secret
  userId        User ID

Options:
  -h, --help    display help for command
```
